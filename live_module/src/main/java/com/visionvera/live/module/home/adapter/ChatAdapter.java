package com.visionvera.live.module.home.adapter;import android.content.Context;import android.view.View;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import com.visionvera.live.R;import com.visionvera.live.module.home.bean.ChatMessageBean;import com.visionvera.live.module.home.bean.GroupChatterBean;import com.visionvera.live.utils.BaseUtils;import com.visionvera.live.widget.recycler.BaseQuickAdapter;import com.visionvera.live.widget.recycler.BaseViewHolder;import java.util.HashMap;/** * @Desc 互动消息列表适配器 * @Author yemh * @Date 2019/6/17 15:12 */public class ChatAdapter extends BaseQuickAdapter<ChatMessageBean, BaseViewHolder> {    private Context mContext;    private LinearLayout llReceiverLayout;    private TextView tvReceiverName;    private ImageView ivReceiverQuestion;    private TextView tvReceiverQuestion;    private LinearLayout llSenderLayout;    private TextView tvSenderName;    private ImageView ivSenderQuestion;    private TextView tvSenderQuestion;    private int chatterId = 0;    private HashMap<Integer, GroupChatterBean> chattersHashMap;    public ChatAdapter(Context context) {        super(R.layout.item_chat_layout, null);        this.mContext = context;    }    public void setChatterId(int chatterId) {        this.chatterId = chatterId;    }    /**     * 设置群成员数据     */    public void setChattersHashMap(HashMap<Integer, GroupChatterBean> map) {        this.chattersHashMap = map;    }    @Override    protected void convert(BaseViewHolder holder, ChatMessageBean bean) {        llReceiverLayout = holder.getView(R.id.ll_receiver_layout);        tvReceiverName = holder.getView(R.id.tv_receiver_name);        ivReceiverQuestion = holder.getView(R.id.iv_receiver_question);        tvReceiverQuestion = holder.getView(R.id.tv_receiver_question);        llSenderLayout = holder.getView(R.id.ll_sender_layout);        tvSenderName = holder.getView(R.id.tv_sender_name);        ivSenderQuestion = holder.getView(R.id.iv_sender_question);        tvSenderQuestion = holder.getView(R.id.tv_sender_question);        int senderId = bean.getSenderId();        GroupChatterBean vo = chattersHashMap.get(senderId);        String content = bean.getContent();        int typeId = bean.getTypeId();        if (senderId == chatterId) {            llReceiverLayout.setVisibility(View.GONE);            llSenderLayout.setVisibility(View.VISIBLE);            if (vo != null) {                tvSenderName.setText(parsePhone(vo.getName()));            }            tvSenderQuestion.setText(content);            if (typeId == 101) {                ivSenderQuestion.setVisibility(View.VISIBLE);            } else {                ivSenderQuestion.setVisibility(View.GONE);            }        } else {            llReceiverLayout.setVisibility(View.VISIBLE);            llSenderLayout.setVisibility(View.GONE);            if (vo != null) {                tvReceiverName.setText(parsePhone(vo.getName()));            }            tvReceiverQuestion.setText(content);            if (typeId == 101) {                ivReceiverQuestion.setVisibility(View.VISIBLE);            } else {                ivReceiverQuestion.setVisibility(View.GONE);            }        }    }    private String parsePhone(String name) {        if (BaseUtils.matchPhone(name)) {            return name.replaceAll("(\\d{3})\\d{4}(\\d{4})", "$1****$2");        } else {            return name;        }    }}